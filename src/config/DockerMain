FROM gcc:latest

# Define cpp files to be compiled.
ARG FILES="main.cpp \
           datatypes/app.cpp \
           datatypes/bloomFilterStorage.cpp \
           datatypes/fileStorage.cpp \
           datatypes/CheckURLCommand.cpp \
           datatypes/AddURLCommand.cpp \
           datatypes/cli.cpp \
           datatypes/MyHash.cpp"

# Copy all files in src directory and make it the working directory.
COPY . /Ap_Email/src
WORKDIR /Ap_Email/src

# Compile all cpp files and define the path to header files.
RUN g++ -I datatypes/include ${FILES} -o /Ap_Email/main
WORKDIR /Ap_Email

# Run main.
CMD ["./main"]